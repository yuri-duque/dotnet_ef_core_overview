# Entity Framework Code Overview

This project is a template project using the Entity Framework Core and Clean Architecture


## Project structure

I used a Clean Architecture to create this template, so I split the project in four different layers:

<img  src="https://user-images.githubusercontent.com/26638073/226077222-5cd3bfd9-ba08-4e54-b084-4b05b1c17a45.png"  alt="Image"  width="50%" style="text-align: center;">

<img  src="https://user-images.githubusercontent.com/26638073/226077333-149c1e89-d841-4c6f-96a3-8982fcf12a40.png"  alt="Image"  width="50%" style="text-align: center;">


### Controller
The Controller layer is the conductor of operations for a request. It controls the transaction scope and manages the session-related information for the request. The controller receives the requests and calls the functions that are responsible for the business rules and returns a response.

This Layer already have created when we created a web API project.

project references:
 - [x] Service
 - [x] Domain
 - [ ] Repository

#### Folders: 
- **Controllers:** here have all REST API endpoints from the project, the name of each file is of the domain it is responsible plus "controller"
- **Dtos:** here we have all data transfer objects that are used to receive or send data to api consumers.
- **Ioc:** here we have the inversion of control for some controller configurations like automapper configuration
- **Mapping:** here we have the automapper mapping for the DTO to models

### Service
The Service layer is responsible to have all business rules, it is enabled to comunicate with all other layers

project references:
 - [ ] Controller
 - [x] Domain
 - [x] Repository

#### Folders: 
- **Ioc:** here we have the inversion of control for some controller configurations like automapper configuration
- **Services: ** here we have the all services from aplication, on the services we have the all busines rules.

### Domain
The Domain layer is responsible to have all models for the project, it is the way to convert the DTOs from the controller and Database to use in the service layer

project references:
 - [ ] Controller
 - [ ] Service
 - [ ] Repository

#### Folders: 
- **Models: ** Here we have the all models used on the application


### Repository
The Repository layer is responsible to communicate the application to the database, this layer is accessible only in the Service layer.

project references:
 - [ ] Controller
 - [ ] Service
 - [x] Domain

#### Folders: 
- **Context:** Here we have the database configuration to use the entity framework core
- **Entities:** Here we have the database entities that we will use save the data
- **Mapping:** Here we have the mapping to automapper to transform the model to entity or the reverse
- **Migrations:** Here we have the migrations generated by entity framework core to create the database structure and the initial data
- **Repositories:** Here we have the functions that will manage the database, for example, the save, update and get


## Packeges

### Controller project
- [Automapper Dependency Injection](https://www.nuget.org/packages/AutoMapper.Extensions.Microsoft.DependencyInjection/12.0.0?_src=template) - version 12.0.0
- [Entity Framework Core Tools](https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Tools/7.0.4?_src=template) - version - 7.0.4
- [Swashbuckle](https://www.nuget.org/packages/Swashbuckle.AspNetCore/6.5.0?_src=template) - version 6.5.0


### Repository project
- [Auto Mapper Dependency Injection](https://www.nuget.org/packages/AutoMapper.Extensions.Microsoft.DependencyInjection/12.0.0?_src=template) - version 12.0.0
- [Entity Framework Core](https://www.nuget.org/packages/Microsoft.EntityFrameworkCore/7.0.4?_src=template) - version 7.0.4
- [Entity Framework Core Design](https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.Design/7.0.4?_src=template) - version - 7.0.4
- [Entity Framework Core Sql Server](https://www.nuget.org/packages/Microsoft.EntityFrameworkCore.SqlServer/7.0.4?_src=template) - version - 7.0.4


# Clean Architecture - Entity Framework

In this document we will see how to create a simple clean architecture with .Net 7 and Entity Framework.

[Clean Architecture ](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)


## Creating new project

In this example we will create a simple web api, so we need create a new web api project.

<img  src="https://user-images.githubusercontent.com/26638073/226075493-747bc1ec-5e00-465b-be15-e11b9c221154.png"  alt="Image"  width="50%" style="text-align: center;">


## Creating a project Structure

In our project, we will have four different projects each one for each different layer.

<img  src="https://user-images.githubusercontent.com/26638073/226077222-5cd3bfd9-ba08-4e54-b084-4b05b1c17a45.png"  alt="Image"  width="50%" style="text-align: center;">

<img  src="https://user-images.githubusercontent.com/26638073/226077333-149c1e89-d841-4c6f-96a3-8982fcf12a40.png"  alt="Image"  width="50%" style="text-align: center;">


### Controller
The Controller layer is the conductor of operations for a request. It controls the transaction scope and manages the session-related information for the request. The controller receives the requests and calls the functions that are responsible for the business rules and returns a response.

This Layer already have created when we created a web API project.

project references:
 - [x] Service
 - [x] Domain
 - [ ] Repository

### Service
The Service layer is responsible to have all business rules, it is enabled to comunicate with all other layers

project references:
 - [ ] Controller
 - [x] Domain
 - [x] Repository

### Domain
The Domain layer is responsible to have all models for the project, it is the way to convert the DTOs from the controller and Database to use in the service layer

project references:
 - [ ] Controller
 - [ ] Service
 - [ ] Repository


### Repository
The Repository layer is responsible to communicate the application to the database, this layer is accessible only in the Service layer.

project references:
 - [ ] Controller
 - [ ] Service
 - [x] Domain


## Instaling Entity Framework Core

To comunicate with data base, we will use the entity framework core, 
